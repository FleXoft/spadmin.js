IBM Spectrum Protect
Command Line Administrative Interface - Version 8, Release 1, Level 7.0
(c) Copyright by IBM Corporation and other(s) 1990, 2019. All Rights Reserved.

Session established with server CLOUDTSM1: Linux/x86_64
  Server Version 8, Release 1, Level 7.000
  Server date/time: 07/02/2019 19:02:55  Last access: 07/02/2019 19:02:45

ANS8000I Server command: 'help update node'.
3.68.19 UPDATE NODE (Update node attributes)

Use this command to modify the attributes of a registered node.



You must use the RENAME NODE command to change the name of a registered
node.

If you update the node authentication method or the node SSLREQUIRED
setting and there is a same-named administrator, those administrator ID
settings change.

You must have system level authority to update the node authentication
method or the node SSLREQUIRED setting and also update a same-named
administrator ID. If the same-named administrator ID has client owner
authority over the node that is being updated, then system level
authority is not required. You must have either unrestricted policy
privilege or restricted policy privilege for the policy domain to which
the client node belongs.

For users of Lightweight Directory Access Protocol (LDAP) servers: 
      *  The information in this documentation applies to the LDAP
         authentication method that is preferred for IBM Spectrum
         Protect V7.1.7 or later servers. For instructions about using
         the previous LDAP authentication method, see Managing passwords
         and logon procedures.
      *  If you change the authentication mode to LDAP, and the node
         name matches an administrative user ID, you might see
         unexpected behavior when an automatic password change occurs
         because the password might be updated twice. As a result, the
         password might become unknown to the administrative user ID.
         Alternatively, the password update operation might fail.

When you register or update a node, you can specify whether damaged
files on the node can be recovered from a target replication server.
Files can be recovered only if all the following conditions are met: 
*  V7.1.1 or later, is installed on the source and target replication
   servers.
*  The REPLRECOVERDAMAGED system parameter is set to ON. The system
   parameter can be set by using the SET REPLRECOVERDAMAGED command.
*  The source server includes at least one file that is marked as
   damaged in the node that is being replicated.
*  The node data was replicated before the damage occurred.

The following table describes how parameter settings affect the recovery
of damaged, replicated files. 

Table 473. Settings that affect the recovery of damaged files
+-----------------+-----------------+----------------+----------------+
| Setting for the | Value of the    | Value of the   | Result         |
| REPLRECOVERDAMA | RECOVERDAMAGED  | RECOVERDAMAGED |                |
| GED system      | parameter on    | parameter on   |                |
| parameter       | the REPLICATE   | the REGISTER   |                |
|                 | NODE command    | NODE and       |                |
|                 |                 | UPDATE NODE    |                |
|                 |                 | commands       |                |
+-----------------+-----------------+----------------+----------------+
| OFF             | YES, NO, or not | YES or NO      | During node    |
|                 | specified       |                | replication,   |
|                 |                 |                | standard       |
|                 |                 |                | replication    |
|                 |                 |                | occurs and     |
|                 |                 |                | damaged files  |
|                 |                 |                | are not        |
|                 |                 |                | recovered from |
|                 |                 |                | the target     |
|                 |                 |                | replication    |
|                 |                 |                | server.        |
+-----------------+-----------------+----------------+----------------+
| OFF             | ONLY            | YES or NO      | An error       |
|                 |                 |                | message is     |
|                 |                 |                | displayed      |
|                 |                 |                | because files  |
|                 |                 |                | cannot be      |
|                 |                 |                | recovered when |
|                 |                 |                | the            |
|                 |                 |                | REPLRECOVERDAM |
|                 |                 |                | AGED system    |
|                 |                 |                | parameter is   |
|                 |                 |                | set to OFF.    |
+-----------------+-----------------+----------------+----------------+
| ON              | YES             | YES or NO      | During node    |
|                 |                 |                | replication,   |
|                 |                 |                | standard       |
|                 |                 |                | replication    |
|                 |                 |                | occurs and     |
|                 |                 |                | damaged files  |
|                 |                 |                | are recovered  |
|                 |                 |                | from the       |
|                 |                 |                | target         |
|                 |                 |                | replication    |
|                 |                 |                | server.        |
+-----------------+-----------------+----------------+----------------+
| ON              | NO              | YES or NO      | During node    |
|                 |                 |                | replication,   |
|                 |                 |                | standard       |
|                 |                 |                | replication    |
|                 |                 |                | occurs and     |
|                 |                 |                | damaged files  |
|                 |                 |                | are not        |
|                 |                 |                | recovered from |
|                 |                 |                | the target     |
|                 |                 |                | replication    |
|                 |                 |                | server.        |
+-----------------+-----------------+----------------+----------------+
| ON              | ONLY            | YES or NO      | Damaged files  |
|                 |                 |                | are recovered  |
|                 |                 |                | from the       |
|                 |                 |                | target         |
|                 |                 |                | replication    |
|                 |                 |                | server, but    |
|                 |                 |                | standard node  |
|                 |                 |                | replication    |
|                 |                 |                | does not       |
|                 |                 |                | occur.         |
+-----------------+-----------------+----------------+----------------+
| ON              | Not specified   | YES            | During node    |
|                 |                 |                | replication,   |
|                 |                 |                | standard       |
|                 |                 |                | replication    |
|                 |                 |                | occurs and     |
|                 |                 |                | damaged files  |
|                 |                 |                | are recovered  |
|                 |                 |                | from the       |
|                 |                 |                | target         |
|                 |                 |                | replication    |
|                 |                 |                | server.        |
+-----------------+-----------------+----------------+----------------+
| ON              | Not specified   | NO             | During node    |
|                 |                 |                | replication,   |
|                 |                 |                | standard       |
|                 |                 |                | replication    |
|                 |                 |                | occurs and     |
|                 |                 |                | damaged files  |
|                 |                 |                | are not        |
|                 |                 |                | recovered from |
|                 |                 |                | the target     |
|                 |                 |                | replication    |
|                 |                 |                | server.        |
+-----------------+-----------------+----------------+----------------+



Privilege class

To issue this command, you must have system privilege, unrestricted
policy privilege, or restricted policy privilege for the policy domain
to which the client node belongs.



Syntax 

               (1)               
>>-UPDate Node-------node_name---------------------------------->

>--+---------------------------------------------------------+-->
   |  (2)            (3)                                     |   
   +--------password-------+-------------------------------+-+   
   |                       |                          (4)  | |   
   |                       '-FORCEPwreset--=--+-No--+------' |   
   |                                          '-Yes-'        |   
   '-FORCEPwreset--=--Yes------------------------------------'   

>--+-----------------------+------------------------------------>
   |                  (5)  |   
   '-PASSExp--=--days------'   

>--+------------------------------+--+------------------+------->
   '-CLOptset--=--option_set_name-'  '-CONtact--=--text-'   

>--+------------------------+--+----------------------------+--->
   '-DOmain--=--domain_name-'  '-COMPression--=--+-Client-+-'   
                                                 +-Yes----+     
                                                 '-No-----'     

>--+------------------------+--+------------------------+------->
   '-ARCHDELete--=--+-Yes-+-'  '-BACKDELete--=--+-No--+-'   
                    '-No--'                     '-Yes-'     

>--+-----------------------------+------------------------------>
   '-WHEREDOmain--=--domain_name-'   

>--+----------------------------------------+------------------->
   '-WHEREPLatform--=--client_platform_name-'   

>--+---------------------+--+--------------------+-------------->
   '-MAXNUMMP--=--number-'  '-KEEPMP--=--+-No--+-'   
                                         '-Yes-'     

>--+---------------------+--+----------------------------+------>
   '-URL--=--url_address-'  '-UTILITYUrl--=--utility_url-'   

                                   (6)    
>--+-----------------------------+------------------------------>
   '-AUTOFSRename--=--+-Yes----+-'        
                      +-No-----+          
                      '-Client-'          

>--+-----------------------------------+------------------------>
   '-VALIdateprotocol--=--+-No-------+-'   
                          +-Dataonly-+     
                          '-All------'     

>--+----------------------------+------------------------------->
   '-TXNGroupmax--=--+-0------+-'   
                     '-number-'     

   .-DATAWritepath--=--ANY---------.   
>--+-------------------------------+---------------------------->
   '-DATAWritepath--=--+-ANY-----+-'   
                       +-LAN-----+     
                       '-LANFree-'     

   .-DATAReadpath--=--ANY---------.   
>--+------------------------------+----------------------------->
   '-DATAReadpath--=--+-ANY-----+-'   
                      +-LAN-----+     
                      '-LANFree-'     

>--+-------------------------+---------------------------------->
   '-TARGETLevel--=--V.R.M.F-'   

   .-SESSIONINITiation--=--Clientorserver--------------------------------------------------------.   
>--+---------------------------------------------------------------------------------------------+-->
   '-SESSIONINITiation--=--+-Clientorserver----------------------------------------------------+-'   
                           |                                                              (7)  |     
                           '-SERVEROnly--HLAddress--=--ip_address--LLAddress--=--tcp_port------'     

>--+--------------------------+--------------------------------->
   '-HLAddress--=--ip_address-'   

>--+-----------------------------+------------------------------>
   |                        (7)  |   
   '-LLAddress--=--tcp_port------'   

>--+------------------------------+----------------------------->
   '-EMAILADdress--=--userID@node-'   

>--+--------------------------------------+--------------------->
   '-DEDUPlication--=--+-SERVEROnly-----+-'   
                       '-Clientorserver-'     

>--+-------------------------------+---------------------------->
   '-BACKUPINITiation--=--+-All--+-'   
                          '-ROOT-'     

>--+-----------------------------------------------------+------>
   '-BKREPLRuledefault--=--+-ALL_DATA------------------+-'   
                           +-ACTIVE_DATA---------------+     
                           +-ALL_DATA_HIGH_PRIORITY----+     
                           +-ACTIVE_DATA_HIGH_PRIORITY-+     
                           +-DEFAULT-------------------+     
                           '-NONE----------------------'     

>--+--------------------------------------------------+--------->
   '-ARREPLRuledefault--=--+-ALL_DATA---------------+-'   
                           +-ALL_DATA_HIGH_PRIORITY-+     
                           +-DEFAULT----------------+     
                           '-NONE-------------------'     

>--+--------------------------------------------------+--------->
   '-SPREPLRuledefault--=--+-ALL_DATA---------------+-'   
                           +-ALL_DATA_HIGH_PRIORITY-+     
                           +-DEFAULT----------------+     
                           '-NONE-------------------'     

>--+------------------------------------------------------------------------+-->
   |           (8)                                                          |   
   '-REPLState-------=--+-ENabled--+--+-----------------------------------+-'   
                        '-DISabled-'  |          (9)                      |     
                                      '-REPLMode-------=--+-SYNCSEnd----+-'     
                                                          '-SYNCRECeive-'       

>--+----------------------------+------------------------------->
   '-RECOVERDamaged--=--+-Yes-+-'   
                        '-No--'     

>--+----------------------------------+------------------------->
   '-ROLEOVERRIDE--=--+-Client------+-'   
                      +-Server------+     
                      +-Other-------+     
                      '-Usereported-'     

>--+---------------------------------------------------------------+-->
   |                                                (10)           |   
   |                               .-SYNCldapdelete--------=--No-. |   
   '-AUTHentication--=--+-LOcal-+--+-----------------------------+-'   
                        '-LDap--'  '-SYNCldapdelete--=--+-Yes-+--'     
                                                        '-No--'        

    (11)                                      
>--------+--------------------------------+--------------------->
         '-SSLrequired--=--+-Yes--------+-'   
                           +-No---------+     
                           +-Default----+     
                           '-SERVERonly-'     

   .-SESSIONSECurity--=--TRANSitional-----.   
>--+--------------------------------------+--------------------->
   '-SESSIONSECurity--=--+-STRict-------+-'   
                         '-TRANSitional-'     

   .-SPLITLARGEObjects--=--Yes-----.   
>--+-------------------------------+---------------------------->
   '-SPLITLARGEObjects--=--+-Yes-+-'   
                           '-No--'     

                  (12)             
   .-GENeratekeys--------=--No-.   
>--+---------------------------+-------------------------------><
   '-GENeratekeys--=----Yes----'   


  Notes: 
1. You must specify at least one optional parameter on this command.
2. Passwords are optional for this command, except when you change the
   authentication method from LDAP to LOCAL.
3. This parameter is not available for the OBJECTClient node type.
4. This parameter is not available for the OBJECTClient node type.
5. This parameter is not available for the OBJECTClient node type.
6. The VALIDATEPROTOCOL parameter is deprecated.
7. HLADDRESS and LLADDRESS must be previously set or specified in the
   UPDATE NODE or REGISTER NODE commands to use
   SESSIONINITIATION=SERVERONLY.
8. If you specify the REPLSTATE parameter and you do not specify the
   REPLMODE parameter, the replication mode of the node is set to SEND.
9. If you specify the REPLMODE parameter, you must also specify the
   REPLSTATE parameter.
10. The SYNCLDAPDELETE parameter applies only if a node that
   authenticates to a Lightweight Directory Access Protocol (LDAP)
   server reverts to local authentication.
11. The SSLREQUIRED parameter is deprecated.
12. This parameter is available only for the OBJECTClient node type.



Parameters

node_name (Required)
   Specifies the name of the client node to be updated. You can use
   wildcard characters to specify this name.

   Restriction: When you update a password with the UPDATE NODE command,
         you cannot use a wildcard character with the node_name
         parameter.

password
   Specifies the new password for the client node. The minimum length of
   the password is 8 characters unless a different value is specified by
   using the SET MINPWLENGTH command. The maximum length of the password
   is 64 characters. This parameter is optional in most cases. If the
   node authentication method is changed from LDAP to LOCAL, a password
   is required. If the node authentication method is LDAP, do not
   specify a password by using the UPDATE NODE command. Passwords remain
   current for a period that is determined by the password expiration
   period. 

   Restriction: This parameter is not supported for object client nodes.

    

   FORCEPwreset
      Specifies whether to force a client to change or reset the
      password. This parameter is optional. 

      Restriction: This parameter is not supported for object client
            nodes.

      You can specify one of the following values: 

      No 
         Specifies that the password expiration period is set by the SET
         PASSEXP command. Do not force a client to change or reset the
         password while it attempts to log on to the server.

      Yes
         Specifies that the client node or administrator password will
         expire at the next logon. The client must change or reset the
         password at the next logon.

         Restrictions: 
               *  For nodes that authenticate with an LDAP server,
                  password expiration is set by using LDAP server
                  utilities. For this reason, do not specify
                  FORCEPWRESET=YES if you plan to specify
                  AUTHENTICATION=LDAP.
               *  If you plan to update a node to authenticate with an
                  LDAP server, and you specified FORCEPWRESET=YES, you
                  must change the password before you can specify
                  FORCEPWRESET=NO and AUTHENTICATION=LDAP.

PASSExp
   Specifies the number of days the password remains valid. You can set
   the password expiration period in the range 0 - 9999 days. A value of
   0 means that the password never expires. This parameter is optional.
   If you do not specify this parameter, the password expiration period
   is unchanged. 

   You can change the password expiration period by using the UPDATE
   NODE or SET PASSEXP commands. To set a common expiration period for
   all administrators and client nodes, issue the SET PASSEXP command.
   You can also use the SET PASSEXP command to selectively set password
   expiration periods. If you selectively set a password expiration
   period by using the REGISTER NODE command, the UPDATE NODE command,
   or the SET PASSEXP command, the expiration period is excluded from
   common password expiration periods that were created by using the SET
   PASSEXP command.

    

   You can use the RESET PASSEXP command to reset the password
   expiration period to the common expiration period. This parameter
   does not apply to passwords that authenticate with an LDAP directory
   server.

   Restriction: This parameter is not supported for object client nodes.

CLOptset
   Specifies the name of the option set to be used by the client. This
   parameter is optional. To remove a client option set, specify the
   CLOPTSET parameter with a null string ("").

CONtact
   Specifies a text string of information that identifies the client
   node. This parameter is optional. The maximum length of the text
   string is 255 characters. Enclose the contact information in
   quotation marks if it contains any blanks. To remove previously
   defined contact information, specify a null string ("").

DOmain
   Specifies the name of the policy domain to which you want to register
   the client node. This parameter is optional. 

   Restriction: For servers with data retention protection enabled, an
         archived registered node cannot be reassigned to a different
         policy domain.

COMPression
   Specifies whether the client node compresses its files before it
   sends them to the server for backup and archive. This parameter is
   optional.

   Restriction: This parameter cannot be specified for a NAS node.

    

   You can specify one of the following values:

    

   Client
      Specifies that the client determines whether files are to be
      compressed.

   Yes
      Specifies that the client node compresses its files before it
      sends them to the server for backup and archive.

   No 
      Specifies that the client node does not compress its files before
      it sends them to the server for backup and archive.

ARCHDELete
   Specifies whether the client node can delete its own archived files
   from the server. This parameter is optional. You can specify one of
   the following values:  

   Yes
      Specifies that the client node can delete its own archive files
      from the server.

   No 
      Specifies that the client node cannot delete its own archive files
      from the server.

BACKDELete
   Specifies whether the client node can delete its own backup files
   from the server. This parameter is optional. You can specify one of
   the following values:  

   No 
      Specifies that the client node cannot delete its own backup files
      from the server.

   Yes
      Specifies that the client node can delete its own backup files
      from the server.

WHEREDOmain
   Specifies the name of the policy domain to be used as a filter in
   combination with the node name to select nodes to update. This
   parameter is optional.

WHEREPLatform
   Specifies the name of the client platform to be used as a filter in
   combination with the node name to select nodes to update. This
   parameter is optional.

MAXNUMMP
   Specifies the maximum number of mount points a node can use on the
   server or storage agent only for operations such as backup, archive,
   and IBM Spectrum Protect for Space Management migration. The
   parameter is optional and does not apply to nodes with a type of NAS
   or SERVER. The default value is 1. You can specify an integer in the
   range 0 - 999. A value of 0 specifies that a node cannot acquire any
   mount point for a client data store operation. The MAXNUMMP value is
   not evaluated or enforced during client data read operations such as
   restore, retrieve, and IBM Spectrum Protect for Space Management
   recall. However, mount points in use for data read operations are
   evaluated against attempted concurrent data store operations for the
   same client node and might prevent the data store operations from
   being able to acquire mount points. 

   For volumes in a storage pool that is associated with the FILE or
   CENTERA device type, the server can have multiple sessions to read
   and one process to write to the same volume concurrently. To increase
   concurrency and provide efficient access for nodes with data in FILE
   or CENTERA storage pools, increase the value of the MAXNUMMP
   parameter.

    

   For nodes that store data into primary storage pools with the
   simultaneous-write function that is enabled, you must adjust the
   value of the MAXNUMMP parameter to specify the correct number of
   mount points for each client session. A client session requires one
   mount point for the primary storage pool and one mount point for each
   copy storage pool and each active-data pool.

URL
   Specifies the URL of the IBM Spectrum Protect web client that is
   configured on the client system. You can use the URL in a web browser
   and in the Operations Center to remotely manage the client node. 

   This parameter is optional. The URL must include the DNS name or IP
   address of the client system, and the port number that is defined on
   the client system for the IBM Spectrum Protect web client. For
   example, http://client.mycorp.com:1581

    

   If you want to remove the value from this parameter, specify empty
   single quotation marks or empty double quotation marks with no spaces
   ('' for single quotation marks, or "" for double quotation marks).

UTILITYUrl
   Specifies the address of the IBM Spectrum Protect client management
   services that are configured on the client system. This URL is used
   by the Operations Center to access client log files so that you can
   remotely diagnose client issues from the Operations Center. 

   This parameter is optional. You can specify a URL of up to 200
   characters in length. The URL must start with https. It includes the
   DNS name or IP address of the client system, and the port number that
   is defined on the client system for the IBM Spectrum Protect client
   management services. For example, https://client.mycorp.com:9028

    

   If you omit the port number, the Operations Center uses the port
   number 9028, which is the default port number when you install the
   client management services on the client system.

KEEPMP
   Specifies whether the client node keeps the mount point for the
   entire session. The parameter is optional. You can specify one of the
   following values: 

   No 
      Specifies that the client node releases the mount point during the
      session. If policy definitions cause data to be stored to a disk
      storage pool after data is stored to a sequential access storage
      pool, any mount points that are held by the session will be
      released.

   Yes
      Specifies that the client node must retain the mount point during
      the entire session. If policy definitions cause data to be stored
      to a disk storage pool after data is stored to a sequential access
      storage pool, any mount points that are held by the session will
      not be released.

AUTOFSRename
   Specifies whether the client is prompted for renaming file spaces
   when the client system upgrades to a client that supports Unicode.
   The prompting and renaming, if allowed, occur only when the client
   runs one of the following operations: archive, selective backup, full
   incremental backup, or partial incremental backup. The renaming
   changes the names of existing backed-up file spaces that are not in
   Unicode in server storage. Then, the file spaces are backed up in
   Unicode. You can use this parameter for Unicode-enabled IBM Spectrum
   Protect clients by using Windows, Macintosh OS X, and NetWare
   operating systems. 

   Important: After the client with support for Unicode is installed,
         any new file spaces that the client backs up are stored in
         server storage by using the UTF-8 code page. UTF-8 is a
         byte-oriented encoding form that is specified by the Unicode
         Standard.

    

   You can specify one of the following values:

    

   Yes
      The server automatically renames existing file spaces when the
      client system upgrades to a client that supports Unicode, and the
      client runs one of the following operations: archive, selective
      backup, full incremental backup, or partial incremental backup.
      The renaming occurs whether the client uses the graphical user
      interface, the command line, or the client scheduler. 

      For example, the server renames a drive as follows: 
      *  Original name: D_DRIVE
      *  New name: D_DRIVE_OLD

      The new name indicates that the file space is stored on the server
      in format that is not Unicode.

   No 
      The server does not rename file spaces automatically when the
      client system upgrades to a client that supports Unicode, and the
      client runs one of the following operations: archive, selective
      backup, full incremental backup, or partial incremental backup.

   Client
      The option AUTOFSRENAME in the client option file determines
      whether file spaces are renamed. 

      By default, the client option is set to PROMPT. When the client
      system upgrades to a client that supports Unicode and the client
      runs an IBM Spectrum Protect operation with the graphical user
      interface or the command line, the program displays a one-time
      prompt to the user about whether to rename file spaces.

       

      When the client scheduler runs an operation, the program does not
      prompt for a choice about renaming, and does not rename file
      spaces. Backups of existing file spaces are sent as before (not in
      Unicode).

   VALIdateprotocol (deprecated)
      

      Specifies whether IBM Spectrum Protect performs a cyclic
      redundancy check to validate the data that is sent between the
      client and the server. The parameter is optional. 

      Important: Beginning with IBM Spectrum Protect Version 8.1.2 and
            Tivoli Storage Manager Version 7.1.8, this parameter is
            deprecated. The validation that was enabled by this
            parameter is replaced by the TLS 1.2 protocol, which is
            enforced by the SESSIONSECURITY parameter. The
            VALIDATEPROTOCOL parameter is ignored. Update your
            configuration to use the SESSIONSECURITY parameter. 

            However, if your environment includes an IBM Spectrum
            Protect backup-archive client that is earlier than V7.1.8 or
            V8.1.2, and the client is connected to a server that is at
            V7.1.8 or later, or V8.1.2 or later, communication errors
            can occur. On the client side, you might see error message
            ANS1029E. On the server side, you might see error message
            ANR8601E.

             

            To avoid these errors, ensure that the VALIDATEPROTOCOL
            parameter is set to NO.

   TXNGroupmax
      

      Specifies the number of files that are transferred as a group
      between a client and a server between transaction commit points.
      Client performance might be improved by using a larger value for
      this option.

       

      Specifying 0 indicates that the node uses the server global value
      that is set in the server options file. To use a value other than
      the server global value, specify a value of 4 through 65,000 for
      this parameter. The node value takes precedence over the server
      value.

       

      Tip: Increasing the TXNGROUPMAX value increases recovery log
            utilization. Higher recovery log utilization might increase
            the risk of running out of log space. Evaluate the
            performance of each node before you change the parameter.

   DATAWritepath
      Specifies the transfer path that is used when the client sends
      data to the server, storage agent, or both, during storage
      operations such as backup or archive. The parameter is optional.

      Remember: If a path is unavailable, the node cannot send any data.
            For example, if you select the LAN-free option but a
            LAN-free path is not defined, the operation fails.

       

      You can specify one of the following values:

       

      ANY
         Specifies that data is sent to the server, storage agent, or
         both, using any available path. A LAN-free path is used if one
         is available. If a LAN-free path is unavailable, the data is
         moved over the LAN.

      LAN
         Specifies that data is sent over the LAN.

      LANFree
         Specifies that data is sent over a LAN-free path.

   DATAReadpath
      Specifies the transfer path that is used when the server, storage
      agent, or both read data for a client, during operations such as
      restore or retrieve. The parameter is optional. 

      Remember: If a path is unavailable, data cannot be read. For
            example, if you select the LAN-free option but a LAN-free
            path is not defined, the operation fails. The value for the
            transfer path also applies to failover connections. If the
            value is set to LANFree, failover cannot occur for the node
            on the secondary server.

       

      You can specify one of the following values:

       

      ANY
         Specifies that the server, storage agent, or both use any
         available path to read data. A LAN-free path is used if one is
         available. If a LAN-free path is unavailable, the data is read
         over the LAN.

      LAN
         Specifies that data is read over the LAN.

      LANFree
         Specifies that data is read by using a LAN-free path.

   SESSIONINITiation
      

      Controls whether the server or the client initiates sessions. The
      parameter is optional.

       

      Clientorserver
         Specifies that the client might initiate sessions with the
         server by communicating on the TCP/IP port that is defined with
         the server option TCPPORT. Server-prompted scheduling might
         also be used to prompt the client to connect to the server.

      SERVEROnly
         Specifies that the server does not accept client requests for
         sessions. All sessions must be initiated by server-prompted
         scheduling on the port that is defined for the client with the
         REGISTER or UPDATE NODE commands. You cannot use the client
         acceptor, dsmcad, to start the scheduler when SESSIONINITIATION
         is set to SERVERONLY. 

         

         HLAddress
            

            Specifies the client IP address that the server contacts to
            initiate scheduled events. This parameter must be used when
            SESSIONINITIATION is set to SERVERONLY, regardless of any
            addresses that are previously used by the client to contact
            the server.

             

            The address can be specified either in numeric or host name
            format. If a numeric address is used, it is saved without
            verification by a domain name server. If the address is not
            correct, it can cause failures when the server attempts to
            contact the client. Host name format addresses are verified
            with a domain name server. Verified names are saved and
            resolved with Domain Name Services when the server contacts
            the client.

         LLAddress
            

            Specifies the client port number on which the client listens
            for sessions from the server. This parameter must be used
            when SESSIONINITIATION is set to SERVERONLY, regardless of
            any addresses that are previously used by the client to
            contact the server.

             

            The value for this parameter must match the value of client
            option TCPCLIENTPORT. The default value is 1501.

   HLAddress
      

      Specifies the client IP address that the server contacts to
      initiate scheduled events. This optional parameter is used only
      when SESSIONINITIATION is set to SERVERONLY, regardless of any
      addresses that were previously used by the client to contact the
      server. If SESSIONINITIATION SERVERONLY is not in use, this option
      has no effect.

       

      The address can be specified either in numeric or host name
      format. If a numeric address is used, it is saved without
      verification by a domain name server. If the address is not
      correct, it can cause failures when the server attempts to contact
      the client. Host name format addresses are verified with a domain
      name server. Verified names are saved and resolved with Domain
      Name Services when the server contacts the client.

   LLAddress
      

      Specifies the client port number on which the client listens for
      sessions from the server. This optional parameter is used only
      when SESSIONINITIATION is set to SERVERONLY, regardless of any
      addresses that were previously used by the client to contact the
      server. If SESSIONINITIATION SERVERONLY is not in use, this option
      has no effect.

       

      The value for this parameter must match the value of client option
      TCPCLIENTPORT. The default value is 1501.

   EMAILADdress
      This parameter is used for more contact information. The
      information that is specified by this parameter is not acted upon
      by IBM Spectrum Protect.

   DEDUPlication
      Specifies where data deduplication can occur for this node. You
      can specify one of the following values: 

      SERVEROnly
         Specifies that data that is stored by this node can be
         deduplicated on the server only.

      Clientorserver
         Specifies that data that is stored by this node can be
         deduplicated on either the client or the server. For data
         deduplication to take place on the client, you must also
         specify a value of YES for the DEDUPLICATION client option. You
         can specify this option in the client option file or in the
         client option set on the IBM Spectrum Protect server.

   TARGETLevel
      

      Specifies the client deployment package that is targeted for this
      node. You can substitute an applicable release package for V.R.M.F
      (Version.Release.Modification.Fix) Level. For example:
      TARGETLevel=6.2.0.0.

       

      You must specify each segment with a number that is applicable to
      a deployment package. You cannot use an asterisk in any field as a
      substitution for a valid number. To remove an existing value,
      specify a null string (" "). The parameter is optional.

      Restriction: The TARGETLEVEL parameter does not apply to nodes
            with a type of NAS or SERVER.

BACKUPINITiation
   Specifies whether the non-root user ID on the client node can back up
   files to the server. The parameter is optional. The default value is
   ALL, indicating that non-root user IDs can back up data to the
   server. You can select one of the following values: 

   All
      Specifies that non-root user IDs can back up files to the server.
      ALL is the default if BACKUPINITIATION is not specified.

   ROOT
      Specifies that only the root user ID can back up files to the
      server.

      Restriction: The attribute is ignored by the server if the
            backup-archive client connects from an operating system
            other than AIX, Linux, or Mac OS.

BKREPLRuledefault, ARREPLRuledefault, and SPREPLRuledefault
   Specifies the replication rule that applies to a data type if the
   file space rules for the data type are set to DEFAULT: 

   BKREPLRuledefault
            Specifies the replication rule for backup data.

   ARREPLRuledefault
            Specifies the replication rule for archive data.

   SPREPLRuledefault
            Specifies the replication rule for space-managed data.

    

   You can specify normal-priority replication or high-priority
   replication rules. In a replication process that includes both normal
   and high-priority data, high-priority data is replicated first.
   Before you specify a rule, consider the order in which you want the
   data to be replicated.

    

   For example, suppose that a client node contains active backup data
   and archive data. Replication of the active backup data is a higher
   priority than the archive data. To prioritize both types of data,
   specify BKREPLRULEDEFAULT=ACTIVE_DATA_HIGH_PRIORITY
   ARREPLRULEDEFAULT=ALL_DATA.

    

   You can specify the following rules: 

   ALL_DATA
      Replicates active and inactive backup data, archive data, or
      space-managed data. The data is replicated with a normal priority.

   ACTIVE_DATA
      Replicates only active backup data. The data is replicated with a
      normal priority. This rule is valid only for BKREPLRULEDEFAULT.

      Attention:   

      If you specify ACTIVE_DATA and one or more of the following
      conditions are true, inactive backup data on the target
      replication server is deleted, and inactive backup data on the
      source replication server is not replicated.

       
      *  When a release version earlier than Version 7.1.1 is installed
         on either the source or target replication servers.
      *  When you are using the REPLICATE NODE command with the
         FORCERECONCILE=YES parameter.
      *  When you are running the initial replication of a file space
         after you configure replication, restore the database, or
         upgrade both the source and target replication servers from a
         release version earlier than V7.1.1.

       

      If the previous conditions are not true, all new and changed files
      since the last replication are replicated, including inactive
      files, and files are deleted when they expire.

   ALL_DATA_HIGH_PRIORITY
      Replicates active and inactive backup data, archive data, or
      space-managed data. Data is replicated with a high priority.

   ACTIVE_DATA_HIGH_PRIORITY
      This rule is the same as the ACTIVE_DATA replication rule except
      data is replicated with a high priority. This rule is valid only
      for BKREPLRULEDEFAULT.

   DEFAULT
      Replicates data according to the server replication rule for
      backup data. 

      For example, suppose that you want to replicate the archive data
      in all the file spaces that belongs to a client node. Replication
      of the archive data is a high priority. One method to accomplish
      this task is to specify ARREPLRULEDEFAULT=DEFAULT. Ensure that the
      file space rules for archive data are also set to DEFAULT and that
      the server rule for archive data is set to ALL_DATA_HIGH_PRIORITY.

      Restriction: If a node is configured for replication, the file
            space rules are set to DEFAULT after the node stores data on
            the source replication server.

   NONE
      Data of the specified type is not replicated. 

      For example, if you do not want to replicate space-managed data
      that belongs to a client node, specify SPREPLRULEDEFAULT=NONE

REPLState
   Specifies whether data that belongs to the client node is ready to be
   replicated. This parameter is optional. You can specify one of the
   following values: 

   ENabled
      Specifies that the client node is ready for replication.

   DISabled
      Specifies that replication does not occur until you enable it.

    

   The system response to these settings depends on the following
   factors: 

   Whether the client node definition exists only on the source 
   replication server and you are configuring the client node for 
   replication for the first time
            If you set the replication state to ENABLED or DISABLED, the
            replication mode of the node on the source replication
            server is automatically set to SEND after the UPDATE NODE
            command is issued. When replication first occurs, a client
            node definition on the target server is automatically
            created. The replication state of the client node on the
            target server is automatically set to ENABLED. The
            replication mode is set to RECEIVE.

   Whether the client node definition exists on the source and the 
   target replication servers, and the node data was previously 
   replicated
            For replication to occur, the replication state of the
            client node on both the source and the target servers must
            be set to ENABLED. For example, if the replication state of
            a client node on the source server is ENABLED and the
            replication state on the target server is DISABLED,
            replication does not occur.

   Whether the client node definition exists on the source and the 
   target replication servers, and the node data was previously exported 
   from the source replication server and imported to the target 
   replication server
            In this case, you are configuring the client nodes to
            synchronize the data between the two servers. When
            replication first occurs, the replication state of the
            client node on the target server is automatically set to
            ENABLED. Data on the source and target servers is
            synchronized. 

            Restriction: To synchronize data, you must specify the
                  REPLMODE parameter in addition to the REPLSTATE
                  parameter.

    

   You can specify the REPLMODE parameter only if the client node has
   never been replicated:

    
   *  If the client node definition exists only on the source
      replication server, the replication mode of the node on the source
      replication server is automatically set to SEND when the UPDATE
      NODE command is issued. The replication mode of the node on the
      target replication server is automatically set to RECEIVE.
   *  If data that belongs to the node was previously replicated, the
      replication mode of the node on the source replication server is
      SEND. The replication mode of the node on the target replication
      server is RECEIVE.

REPLMode
   Specifies whether to synchronize the data that belongs to this client
   node. Specify this parameter only if data that belongs to the client
   node was exported from the source replication server and imported to
   the target replication server. Synchronization occurs during
   replication. 

   To synchronize data, you must issue the UPDATE NODE command on both
   the source and target replication servers and specify the REPLMODE
   and REPLSTATE parameters. The value that you specify for the REPLMODE
   parameter depends on whether the server is a source of or a target
   for replicated data.

    

   You can specify one of the following values: 

   SYNCSEnd
      Specifies that data that belongs to this client node is
      synchronized with data on a target server during replication.
      Specify this value only on the server that exported the data. When
      the synchronization is complete, the replication mode for the
      client node on the source server is automatically set to SEND. The
      replication mode remains SEND unless you remove the node by
      issuing the REMOVE REPLNODE command.

   SYNCRECeive
      Specifies that data that belongs to this client node is
      synchronized with data on a source server during replication.
      Specify this value only on the server that imported the data. When
      the synchronization is complete, the replication mode for the
      client node on the target server is automatically set to RECEIVE.
      The replication mode remains RECEIVE unless you remove the node by
      issuing the REMOVE REPLNODE command.

   Restrictions: 
         *  You can set the REPLMODE parameter only if the initial
            replication state is NONE. To synchronize data, you change
            the replication state to ENABLED or DISABLED and specify a
            value for the REPLMODE parameter.
         *  Data can be synchronized only if you specified
            DATES=ABSOLUTE on the IMPORT NODE command. If you specified
            DATES=RELATIVE to import data, you must rename the node or
            delete its data before replication. If you do not take one
            of these steps, you can lose data.
         *  If the REPLMODE parameter was set incorrectly, you must
            issue the REMOVE REPLNODE command before you update the
            client node definition. For example, suppose that you
            updated the definition of a client node whose data you
            wanted to replicate. The data that belongs to the node was
            previously exported to the target replication server. You
            specified ENABLED as the setting of the REPLSTATE parameter.
            However, you did not specify SYNCSEND on the source
            replication server. As a result, the REPLMODE parameter was
            automatically set to SEND, and data that belongs to the node
            could not be synchronized or replicated. 

            Issuing REMOVE REPLNODE sets the replication state and the
            replication mode to NONE. After the REMOVE REPLNODE command
            is completed, reissue the UPDATE NODE command with the
            correct parameters and values.

RECOVERDamaged
   Specifies whether damaged files can be recovered for this node from a
   target replication server. The parameter is optional. The default
   value is YES. You can specify one of the following values: 

   Yes
      Specifies that recovery of damaged files from a target replication
      server is enabled for this node.

   No 
      Specifies that recovery of damaged files from a target replication
      server is not enabled for this node.

      Tip: The value of the RECOVERDAMAGED parameter is only one of
            several settings that determine whether damaged files are
            recovered. For information about how to specify the
            settings, see Settings that affect the recovery of damaged
            files.

ROLEOVERRIDE
   

   Specifies whether to override the reported role of the client for
   processor value unit (PVU) estimation reporting. The default is
   USEREPORTED.

    

   The role reported by the client is either client-device (for example,
   a workstation) or server-device (for example, file/print server,
   application server, database). By default, the client reports its
   role that is based on the client type and the operating system. All
   clients initially report their role as server-device, except for IBM
   Spectrum Protect backup-archive clients that are running Microsoft
   Windows workstation distributions (Windows Vista) and Macintosh OS X.

    

   Specify one of the following values: 

   Client
      Specifies a client-device.

   Server
      Specifies a server-device.

   Other
      Specifies that this node is not to be used for PVU estimation
      reporting. The Other value is useful when multiple nodes are
      deployed for a physical system (for example, virtual environments,
      test nodes, retired nodes, and nodes not in production or
      clustering).

   Usereported
      Use the reported role that is provided by the client.

AUTHentication
   This parameter determines the password authentication method that you
   use; either LDAP or LOCAL. 

   LOcal
      Specifies that the node uses the local IBM Spectrum Protect server
      database to store passwords.

   LDap
      Specifies that the node uses an LDAP directory server to
      authenticate passwords. Passwords are not stored in the IBM
      Spectrum Protect database.

SYNCldapdelete
   This parameter applies only if you want a node that authenticates
   with a Lightweight Directory Access Protocol (LDAP) server to change
   to authenticate with the IBM Spectrum Protect server. The parameter
   specifies whether to remove the node from the LDAP server. 

   Yes
      Specifies that the node is removed.

      Restriction: Do not specify a value of YES. (The value of YES is
            appropriate only for users of the previous LDAP
            authentication method, which is described in Managing
            passwords and logon procedures.)

   No 
      Specifies that the node is not removed. This is the default value.

SSLrequired (deprecated)
   

   Specifies whether the node must use the Secure Sockets Layer (SSL)
   protocol to communicate with the IBM Spectrum Protect server. The
   parameter is optional. When you authenticate passwords with an LDAP
   directory server, you must protect the sessions by using SSL or
   another network security method.

    

   Important: Beginning with IBM Spectrum Protect V8.1.2 software and
         Tivoli Storage Manager V7.1.8 software, this parameter is
         deprecated. The validation that was enabled by this parameter
         is replaced by the TLS 1.2 protocol, which is enforced by the
         SESSIONSECURITY parameter. The SSLREQUIRED parameter is
         ignored. Update your configuration to use the SESSIONSECURITY
         parameter.

SESSIONSECurity
   Specifies whether the node must use the most secure settings to
   communicate with an IBM Spectrum Protect server. This parameter is
   optional. 

   You can specify one of the following values:

    

   STRict
      Specifies that the strictest security settings are enforced for
      the node. The STRICT value uses the most secure communication
      protocol available, which is currently TLS 1.2. The TLS 1.2
      protocol is used for SSL sessions between the server and the node.
      To specify whether the server uses TLS 1.2 for the entire session
      or only for authentication, see the SSL client option. 

      To use the STRICT value, the following requirements must be met to
      ensure that the node can authenticate with the server: 
      *  Both the node and server must be using IBM Spectrum Protect
         software that supports the SESSIONSECURITY parameter.
      *  The node must be configured to use the TLS 1.2 protocol for SSL
         sessions between the server and the node.

      Nodes set to STRICT that do not meet these requirements are unable
      to authenticate with the server.

   TRANSitional
      Specifies that the existing security settings are enforced for the
      node. This is the default value. This value is intended to be used
      temporarily while you update your security settings to meet the
      requirements for the STRICT value. 

      If SESSIONSECURITY=TRANSITIONAL and the node has never met the
      requirements for the STRICT value, the node will continue to
      authenticate by using the TRANSITIONAL value. However, after a
      node meets the requirements for the STRICT value, the
      SESSIONSECURITY parameter value automatically updates from
      TRANSITIONAL to STRICT. Then, the node can no longer authenticate
      by using a version of the client or an SSL/TLS protocol that does
      not meet the requirements for STRICT. In addition, after a node
      successfully authenticates by using a more secure communication
      protocol, the node can no longer authenticate on the same server
      by using a less secure protocol. For example, if a node that is
      not using SSL is updated and successfully authenticates by using
      TLS 1.2, the node can no longer authenticate by using no SSL
      protocol or by using TLS 1.1. This restriction also applies when
      you use functions such as virtual volumes, when the node
      authenticates to the IBM Spectrum Protect server as a node from
      another server.

SPLITLARGEObjects
   Specifies whether large objects that are stored by this node are
   automatically split into smaller pieces, by the server, to optimize
   server processing. Specifying Yes causes the server to split large
   objects (over 10 GB) into smaller pieces when stored by a client
   node. Specifying No bypasses this process. Specify No only if your
   primary concern is maximizing throughput of backups directly to tape.
   The default value is Yes.

GENeratekeys
   Specifies that the server generates new authentication credentials
   for a node with the TYPE=OBJECTCLIENT parameter. Specifying YES means
   that the server generates a new access ID and secret key for this
   client. You must reconfigure the associated client to use the new
   authentication values. The default value is NO.



Example: Update node SIMON to authenticate with an LDAP directory server
and connect using SSL



update node simon authentication=ldap sslrequired=yes

When you specify the SSLREQUIRED parameter, the server is not
automatically configured for SSL. You must follow the instructions for
connecting with SSL in order for the example to work.



Example: Update all nodes to communicate with a server by using strict
session security

Update all nodes to use the strictest security settings to authenticate
with the server.

update node * sessionsecurity=strict



Example: Update a node with software release information for a future
deployment

The client deployment feature helps you update a backup-archive client
to a newer release. The information that is generated from the UPDATE
NODE command can help you when you plan a deployment. The information is
stored for a future deployment and can be viewed by issuing the QUERY
NODE command. After a deployment, you can issue the QUERY NODE command
to see the current level and the target level. For example, to update
node LARRY to backup-archive client Version 6.3.0.0.



update node LARRY targetlevel=6.3.0.0



Example: Update a node backup to compress data and keep the client from
deleting archived files

Update node LARRY so that the data on node LARRY is compressed when it
is backed up or archived by IBM Spectrum Protect and so that the client
cannot delete archived files.

update node larry compression=yes archdelete=no



Example: Update a node's number of files that can be transferred as a
group

Update node LARRY and increase the TXNGroupmax value to 1,000.

update node larry txngroupmax=1000



Example: Update a node and allow it to deduplicate on the client

Update a node BOB so that it can deduplicate on the client.

update node bob deduplication=clientorserver



Example: Update the role of node BOB to a server-device for PVU
estimation reporting

If you want to accumulate PVU values, only server device roles are
recorded. You can update a node from client-device to server-device by
issuing the UPDATE NODE command. For this example, node BOB is updated
to a server-device.

update node bob role=server



Example: Update a node definition on a source replication server

NODE1 is defined to a source replication server. The data that belongs
to NODE1 was previously exported to a target replication server. Update
the replication rule for backup data that belongs to NODE1 so that
active backup data is replicated with a high priority. Enable
replication for the node. Set up data synchronization with the target
replication server.

update node node1 bkreplruledefault=active_data_high_priority
replstate=enabled replmode=syncsend



Example: Update a node definition to enable recovery of damaged files

Update the PAYROLL node to enable the recovery of damaged files from a
target replication server.

update node payroll recoverdamaged=yes



Related commands

Table 474. Commands related to UPDATE NODE
+----------------------------------+----------------------------------+
| Command                          | Description                      |
+----------------------------------+----------------------------------+
| QUERY FILESPACE                  | Displays information about data  |
|                                  | in file spaces that belong to a  |
|                                  | client.                          |
+----------------------------------+----------------------------------+
| QUERY NODE                       | Displays partial or complete     |
|                                  | information about one or more    |
|                                  | clients.                         |
+----------------------------------+----------------------------------+
| QUERY PVUESTIMATE                | Displays an estimate of the      |
|                                  | client-devices and               |
|                                  | server-devices being managed.    |
+----------------------------------+----------------------------------+
| QUERY REPLNODE                   | Displays information about the   |
|                                  | replication status of a client   |
|                                  | node.                            |
+----------------------------------+----------------------------------+
| REGISTER ADMIN                   | Defines a new administrator      |
|                                  | without granting administrative  |
|                                  | authority.                       |
+----------------------------------+----------------------------------+
| REGISTER NODE                    | Defines a client node to the     |
|                                  | server and sets options for that |
|                                  | user.                            |
+----------------------------------+----------------------------------+
| REMOVE NODE                      | Removes a client from the list   |
|                                  | of registered nodes for a        |
|                                  | specific policy domain.          |
+----------------------------------+----------------------------------+
| REMOVE REPLNODE                  | Removes a node from replication. |
+----------------------------------+----------------------------------+
| RENAME NODE                      | Changes the name for a client    |
|                                  | node.                            |
+----------------------------------+----------------------------------+
| REPLICATE NODE                   | Replicates data in file spaces   |
|                                  | that belong to a client node.    |
+----------------------------------+----------------------------------+
| RESET PASSEXP                    | Resets the password expiration   |
|                                  | for nodes or administrators.     |
+----------------------------------+----------------------------------+
| SET DEDUPVERIFICATIONLEVEL       | Specifies the percentage of      |
|                                  | extents verified by the server   |
|                                  | during client-side               |
|                                  | deduplication.                   |
+----------------------------------+----------------------------------+
| SET PASSEXP                      | Specifies the number of days     |
|                                  | after which a password is        |
|                                  | expired and must be changed.     |
+----------------------------------+----------------------------------+
| SET REPLRECOVERDAMAGED           | Specifies whether node           |
|                                  | replication is enabled to        |
|                                  | recover damaged files from a     |
|                                  | target replication server.       |
+----------------------------------+----------------------------------+
| UPDATE ADMIN                     | Changes the password or contact  |
|                                  | information associated with any  |
|                                  | administrator.                   |
+----------------------------------+----------------------------------+
| UPDATE FILESPACE                 | Changes file-space               |
|                                  | node-replication rules.          |
+----------------------------------+----------------------------------+


ANS8002I Highest return code was 0.

